#!/bin/sh

# Syncs repositories and downloads updates, meant to be run as a cronjob.

ping -q -c 3 www.baidu.com > /dev/null || exit

dunstify "ğŸ“¦ æç¤º" "æ­£åœ¨æ£€æŸ¥å¯æ›´æ–°è½¯ä»¶åŒ…..."

paru -Syyuw --noconfirm || dunstify "é”™è¯¯,ä¸‹è½½æ›´æ–°å¤±è´¥.
æ£€æŸ¥ä½ çš„ç½‘ç»œè¿æ¥, æˆ–æ‰‹åŠ¨æ›´æ–°."
pkill -RTMIN+9 "${STATUSBAR:-dwmblocks}"

if pacman -Qu | grep -v "\[ignored\]"
then
	dunstify "ğŸ æç¤º" "æœ‰å¯ç”¨æ›´æ–°. ç‚¹å‡»çŠ¶æ€æ å›¾æ ‡ (ğŸ“¦) å¼€å§‹æ›´æ–°."
else
	dunstify "ğŸ“¦ æç¤º"  "åŒæ­¥å®Œæ¯•. æ²¡æœ‰å¯æ›´æ–°çš„è½¯ä»¶åŒ…."
fi
